<div class="vote-container">
  @if (!showResults()) {
  <h2>Vota por el Impostor</h2>
  <div class="players-grid">
    @for (player of votablePlayers(); track player.id) {
    <button (click)="voteForPlayer(player)" [disabled]="hasVoted()">
      {{ player.name }}
    </button>
    }
  </div>
  @if (hasVoted()) {
  <p class="waiting-text">Esperando a que los demÃ¡s jugadores voten...</p>
  }
  } @else {
  <div class="modal-overlay">
    <div class="modal-content">
      <h1 class="modal-title">ðŸŽ­ Fin del Juego ðŸŽ­</h1>

      <div class="results-info">
        <div class="result-item">
          <p class="result-label">La palabra era:</p>
          <h2 class="result-value word">{{ gameWord() }}</h2>
        </div>

        <div class="result-item impostor-reveal">
          <p class="result-label">El impostor era:</p>
          <h2 class="result-value impostor">{{ impostorName() }}</h2>
        </div>

        @if (voteResults()?.isTie) {
        <div class="result-item">
          <p class="result-label">Resultado de la VotaciÃ³n:</p>
          <h2 class="result-value">Â¡Hubo un empate! Nadie fue expulsado.</h2>
        </div>
        } @else if (voteResults()?.votedOutPlayer) {
        <div class="result-item">
          <p class="result-label">El jugador expulsado fue:</p>
          <h2 class="result-value">{{ voteResults()?.votedOutPlayer }}</h2>
        </div>
        }

        <div class="result-item">
          <p class="result-label">Desglose de Votos:</p>
          <ul class="vote-breakdown">
            @for (vote of voteResults()?.voted; track $index) {
            <li>
              <span class="voter-name">{{ vote.voter }}</span> votÃ³ por <span class="voted-name">{{ vote.voted }}</span>
            </li>
            }
          </ul>
        </div>
      </div>

      <div class="results-actions">
        @if (isHost()) {
        <button (click)="startNewRound()" class="btn-new-round">
          <span>ðŸŽ®</span> Nueva Ronda
        </button>
        } @else {
        <p class="waiting-text">Esperando al host para iniciar una nueva ronda...</p>
        }
      </div>
    </div>
  </div>
  }
</div>